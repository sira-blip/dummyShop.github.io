(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2958:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,8898)),Promise.resolve().then(r.bind(r,2638)),Promise.resolve().then(r.bind(r,8498)),Promise.resolve().then(r.bind(r,4915))},8898:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(5155),a=r(2115),l=r(6046),i=r(80);function n(e){let{children:t}=e,r=(0,l.useRouter)(),n=(0,l.usePathname)();return(0,a.useEffect)(()=>{(0,i.a$)()||"/login"===n||r.replace("/login")},[r,n]),(0,s.jsx)(s.Fragment,{children:t})}},2638:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var s=r(5155),a=r(2115),l=r(719),i=r(8474),n=r(2320),c=r(6710),d=r(7396),o=r(6046),u=r(4915),h=r(767);function m(e){let{setShowPopup:t}=e,{cart:r,clearCart:l}=(0,u._)(),[n,c]=(0,a.useState)(!1),d=()=>c(!n),o=r.reduce((e,t)=>e+t.quantity,0),m=r.reduce((e,t)=>e+t.price*t.quantity,0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:d,className:"relative bg-lime-100 dark:bg-gray-500 hover:bg-purple-700 hover:text-white px-2 rounded-full",children:[(0,s.jsx)(i.A,{}),o>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 w-5 h-5 flex items-center justify-center font-bold text-white bg-red-500 rounded-full",children:o})]}),(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-40  ".concat(n?"opacity-100 visible":"opacity-0 invisible"),onClick:d}),(0,s.jsxs)("div",{className:"fixed top-0 right-0 h-full w-[28rem] bg-white dark:bg-gray-800 shadow-lg z-50 transform transition-transform duration-200 flex flex-col ".concat(n?"translate-x-0":"translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Votre Panier"}),(0,s.jsx)("button",{onClick:d,children:(0,s.jsx)(h.A,{})})]}),(0,s.jsx)("div",{className:"flex flex-col flex-1 justify-between",children:0===r.length?(0,s.jsx)("p",{className:"p-5 text-center font-semibold",children:"Votre Panier est vide, n'h\xe9sitez pas \xe0 le remplir par vos produits pr\xe9f\xe9r\xe9s"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{className:"divide-y divide-gray-200 flex-1 overflow-y-auto max-h-[60vh] p-4",children:r.map(e=>(0,s.jsxs)("li",{className:"flex gap-3 items-center py-3",children:[(0,s.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-12 h-12 object-cover rounded"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.quantity,"*$",e.price]})]}),(0,s.jsxs)("p",{className:"font-medium",children:["$",(e.quantity*e.price).toFixed(2)]})]},e.productId))}),(0,s.jsxs)("div",{className:"border-t p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between font-semibold mb-2",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["$",m.toFixed(2)]})]}),(0,s.jsx)("button",{onClick:()=>{let e=JSON.parse(localStorage.getItem("localOrders")||"[]");e.push({id:crypto.randomUUID(),items:r,createdAt:new Date().toISOString()}),localStorage.setItem("localOrders",JSON.stringify(e)),l(),d(),null==t||t(!0)},className:"w-full bg-purple-500 text-white py-2 rounded hover:bg-purple-400 mt-4 px-4",children:"Paiement"})]})]})})]})]})}var x=r(507);let f=[{href:"/products",label:"Produits",icon:(0,s.jsx)(l.A,{})},{href:"/orders",label:"Ordres",icon:(0,s.jsx)(i.A,{})},{href:"/metrics",label:"M\xe9triques",icon:(0,s.jsx)(n.A,{})}];function p(){let e=(0,o.usePathname)(),[t,r]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1);return(0,s.jsx)("header",{className:"relative border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-md",children:(0,s.jsxs)("div",{className:"container py-4 flex justify-between items-center gap-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.default,{href:"/metrics",className:"font-semibold text-lg",children:"DummyShop"})}),(0,s.jsxs)("nav",{className:" hidden md:flex gap-6 text-sm",children:[f.map(t=>(0,s.jsxs)(d.default,{href:t.href,className:"flex gap-2 items-center hover:bg-purple-700 hover:text-white py-2 px-4 rounded-md ".concat(e===t.href?"bg-purple-700 text-white":"","\n                      "),children:[t.icon,t.label]},t.href)),(0,s.jsx)(m,{setShowPopup:i})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 md:hidden",children:[(0,s.jsx)(m,{setShowPopup:i}),(0,s.jsx)("button",{className:"md:hidden flex items-center border border-gray-300  rounded-md hover:bg-gray-100 dark:bg-gray-800",onClick:()=>{r(!t)},children:(0,s.jsx)(c.A,{})})]}),t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"absolute left-0 right-0 top-full md:hidden bg-white dark:bg-gray-900 brder-t border-gray-200 dark:border-gray-800",children:(0,s.jsxs)("nav",{className:"flex flex-col items-start p-4 space-y-2",children:[" ",f.map(t=>(0,s.jsxs)(d.default,{href:t.href,className:"w-full flex gap-2 items-center  hover:bg-purple-700 hover:text-white py-2 px-4 rounded-md transition ".concat(e===t.href?"bg-purple-700 text-white":"","\n                      "),onClick:()=>{r(!1)},children:[t.icon,t.label]},t.href))]})})}),l&&(0,s.jsx)(x.A,{color:"green",message:"Votre paiement a \xe9t\xe9 effectu\xe9 avec succ\xe8s",duration:1500})]})})}},507:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155),a=r(2115);function l(e){let{color:t="green",message:r,duration:l=1e3}=e,[i,n]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=setTimeout(()=>n(!1),l);return()=>clearTimeout(e)},[l]),i)?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 z-50",children:(0,s.jsx)("div",{className:"border p-4 rounded-lg shadow-lg w-80 text-center ".concat({green:"bg-green-100 text-green-800 border-green-300",red:"bg-red-100 text-red-800 border-red-300"}[t]),children:(0,s.jsx)("p",{className:"font-medium",children:r})})}):null}},8498:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(5155),a=r(7066),l=r(5906),i=r(2115);function n(e){let{children:t}=e,[r]=(0,i.useState)(()=>new a.E({defaultOptions:{queries:{staleTime:3e4,refetchOnReconnect:!0,refetchOnWindowFocus:!1,retry:1}}}));return(0,s.jsx)(l.Ht,{client:r,children:t})}},4915:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>n,_:()=>c});var s=r(5155),a=r(2115);let l="cart",i=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{d(!0);try{let e=localStorage.getItem(l);n(e?JSON.parse(e):[])}catch(e){}},[]),(0,a.useEffect)(()=>{if(c)try{localStorage.setItem(l,JSON.stringify(r))}catch(e){console.log("error saving cart",e)}},[r,c]),(0,s.jsx)(i.Provider,{value:{cart:r,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n(r=>r.find(t=>t.productId===e.id)?r.map(r=>r.productId===e.id?{...r,quantity:r.quantity+t,total:r.price*(r.quantity+t)}:r):[...r,{productId:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail,quantity:t,total:e.price*t}])},clearCart:()=>n([])},children:t})},c=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useCart doit \xeatre utilis\xe9 au milieu de CartProvider");return e}},80:(e,t,r)=>{"use strict";r.d(t,{WG:()=>l,a$:()=>a});let s="auth_ecommerce_token";function a(){return null!==sessionStorage.getItem(s)}function l(e){let t=btoa("".concat(e,":").concat(Date.now()));sessionStorage.setItem(s,t)}},347:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[690,527,753,441,517,358],()=>t(2958)),_N_E=e.O()}]);