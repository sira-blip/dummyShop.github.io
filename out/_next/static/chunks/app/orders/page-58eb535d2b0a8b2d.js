(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{4798:(e,t,r)=>{Promise.resolve().then(r.bind(r,5634))},5634:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),a=r(8629),c=r(5534),l=r(2115);function n(e){let{cart:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Commande : ",t.id]}),(0,s.jsxs)("div",{className:"text-sm font-semibold text-gray-200 bg-purple-800 rounded-2xl px-2 py-1",children:["User Id:",t.userId]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1  gap-4",children:t.products.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 border rounded-lg p-3 bg-gray-50",children:[(0,s.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-16 h-16 rounded object-cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-black",children:e.title}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Quantit\xe9: $",e.quantity," * ",e.price.toFixed(2),"$"]})]}),(0,s.jsxs)("p",{className:"text-black text-sm font-bold whitespace-nowrap",children:["$",e.total.toFixed(2)]})]},e.id))})]})}function o(e){let{cart:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4 ",children:(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Commande locale : ",t.id]})}),(0,s.jsx)("div",{className:"grid grid-cols-1  gap-4",children:t.items.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center gap-3 border rounded-lg p-3 bg-gray-50",children:[(0,s.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-16 h-16 rounded object-cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-black",children:e.title}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Quantit\xe9: ",e.quantity," * $",e.price.toFixed(2)]})]}),(0,s.jsxs)("p",{className:"text-black text-sm font-bold whitespace-nowrap",children:["$",null===(t=e.total)||void 0===t?void 0:t.toFixed(2)]})]},e.productId)})})]})}var d=r(9228),i=r(507);function u(){let[e,t]=(0,l.useState)([]),[r,u]=(0,l.useState)("dummy"),[m,x]=(0,l.useState)("all");(0,l.useEffect)(()=>{let e=localStorage.getItem("localOrders");e&&t(JSON.parse(e))},[]);let{page:h,setPage:p,totalPages:g,skip:j,setTotal:f}=(0,d.A)(0,5),{data:b,isLoading:v,isError:y}=(0,a.I)({queryKey:["orders",5,j],queryFn:()=>(0,c.cU)(5,j)});(0,l.useEffect)(()=>{(null==b?void 0:b.total)&&f(b.total)},[null==b?void 0:b.total,f]);let N=function(e){let{orders:t,filter:r}=e;return t.filter(e=>{if("all"===r)return!0;let t=new Date;return t.setDate(t.getDate()-("7j"===r?7:30)),new Date(e.createdAt)>=t})}({orders:e,filter:m}),w=!v&&!y&&(null==b?void 0:b.carts.length)===0,k=0===N.length;return(0,s.jsxs)("div",{className:"card",children:[y&&(0,s.jsx)(i.A,{color:"red",message:"Une erreur est survenue. Veuillez r\xe9essayer."}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Orders"}),(0,s.jsxs)("div",{className:"flex gap-6 mb-6",children:[(0,s.jsx)("button",{onClick:()=>u("dummy"),className:"px-4 py-2 shadow-sm hover:shadow-lg  ".concat("dummy"===r?"border-b border-purple-900":"text-gray-500"),children:"commandes (dummy)"}),(0,s.jsx)("button",{onClick:()=>u("local"),className:"px-4 py-2 shadow-sm hover:shadow-lg  ".concat("local"===r?"border-b border-purple-900":"text-gray-500"),children:"commandes locales"})]}),v&&(0,s.jsx)("div",{className:"skeleton h-20 w-full"}),"dummy"===r&&(0,s.jsxs)("div",{children:[w&&(0,s.jsxs)("p",{className:"text-gray-500 text-center py-6",children:[" ","Aucune commande trouv\xe9e sur DummyJSON"]}),null==b?void 0:b.carts.map(e=>(0,s.jsx)("div",{className:"border rounded-2xl p-4 my-4",children:(0,s.jsx)(n,{cart:e})},e.id)),(0,s.jsxs)("div",{className:"flex justify-center gap-2 mt-4",children:[(0,s.jsx)("button",{onClick:()=>p(e=>Math.max(e-1,1)),disabled:1===h,className:"px-3 py-1 rounded border hover:bg-gray-100 disabled:opacity-50",children:"Pr\xe9c\xe9dant"}),(0,s.jsxs)("span",{className:"px-4 py-2 font-medium",children:["Page ",h," sur ",g]}),(0,s.jsx)("button",{onClick:()=>p(e=>e+1),disabled:h>=g,className:"px-3 py-1 rounded border hover:bg-gray-100 disabled:opacity-50",children:"Suivant"})]})]}),"local"===r&&(0,s.jsxs)("div",{children:[" ",(0,s.jsx)("label",{className:"mr-2",children:"filter par :"}),(0,s.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"border py-2 px-4 rounded",children:[(0,s.jsx)("option",{value:"7j",children:" 7 jours "}),(0,s.jsx)("option",{value:"30j",children:" 30 jours "}),(0,s.jsx)("option",{value:"all",children:" Toutes "})]}),k?(0,s.jsxs)("p",{className:"text-gray-500 text-center py-6",children:[" ","Aucune commande local trouv\xe9e"]}):N.map(e=>(0,s.jsx)("div",{className:"border rounded-2xl p-4 my-4",children:(0,s.jsx)(o,{cart:e})},e.id))]})]})}},507:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5155),a=r(2115);function c(e){let{color:t="green",message:r,duration:c=1e3}=e,[l,n]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=setTimeout(()=>n(!1),c);return()=>clearTimeout(e)},[c]),l)?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 z-50",children:(0,s.jsx)("div",{className:"border p-4 rounded-lg shadow-lg w-80 text-center ".concat({green:"bg-green-100 text-green-800 border-green-300",red:"bg-red-100 text-red-800 border-red-300"}[t]),children:(0,s.jsx)("p",{className:"font-medium",children:r})})}):null}},9228:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);function a(e,t){let[r,a]=(0,s.useState)(1),[c,l]=(0,s.useState)(e),n=(0,s.useMemo)(()=>Math.ceil(c/t)||1,[c,t]),o=(0,s.useMemo)(()=>(r-1)*t,[r,t]);return{page:r,setPage:a,totalPages:n,skip:o,setTotal:l}}},5534:(e,t,r)=>{"use strict";r.d(t,{c0:()=>n,cU:()=>o,hU:()=>d,j0:()=>a,jE:()=>l,zh:()=>c});let s="https://dummyjson.com";async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(s,"/products?limit=").concat(e,"&skip=").concat(t));if(!r.ok)throw Error("Erreur de r\xe9cup\xe9ration de produits");return r.json()}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=await fetch("".concat(s,"/products/search?q=").concat(e,"&limit=").concat(t,"&skip=").concat(r));if(!a.ok)throw Error("Erreur hors de la recherche des produits");return a.json()}async function l(){let e=await fetch("".concat(s,"/products/categories"));if(!e.ok)throw Error("Erreur de r\xe9cup\xe9ration des categories");return e.json()}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=await fetch("".concat(s,"/products/category/").concat(e,"?limit=").concat(t,"&skip=").concat(r));if(!a.ok)throw Error("Erreur hors de la r\xe9cup\xe9ration des produits par cat\xe9gorie");return a.json()}async function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(s,"/carts?limit=").concat(e,"&skip=").concat(t));if(!r.ok)throw Error("Erreur de r\xe9cup\xe9ration des cartes");return r.json()}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(s,"/users?limit=").concat(e,"&skip=").concat(t));if(!r.ok)throw Error("Erreur de r\xe9cup\xe9ration des utilisateurs");return r.json()}}},e=>{var t=t=>e(e.s=t);e.O(0,[527,629,441,517,358],()=>t(4798)),_N_E=e.O()}]);