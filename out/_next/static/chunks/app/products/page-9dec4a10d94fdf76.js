(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{1559:(e,t,r)=>{Promise.resolve().then(r.bind(r,2333))},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:h,...p}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:n?24*Number(i)/Number(s):i,className:c("lucide",d),...!u&&!o(p)&&{"aria-hidden":"true"},...p},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:o,...l}=r;return(0,a.createElement)(d,{ref:i,iconNode:t,className:c("lucide-".concat(s(n(e))),"lucide-".concat(e),o),...l})});return r.displayName=n(e),r}},8474:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},2333:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(2115),i=r(4915),n=r(8474),c=r(507);let o=e=>{let{product:t}=e,{addToCart:r}=(0,i._)(),[o,l]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{r(t,1),l(!1),setTimeout(()=>{l(!0)})},className:"flex gap-2 justify-center w-full bg-purple-800 text-white px-4 py-2 rounded-lg hover:shadow-lg hover:bg-purple-600",children:[(0,a.jsx)(n.A,{}),"Ajouter au panier"]}),o&&(0,a.jsx)(c.A,{color:"green",message:"Le produit a \xe9t\xe9 ajout\xe9 au panier ",duration:500})]})};function l(e){let{product:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2 border rounded-lg p-3 shadow-sm",children:[(0,a.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-full h-60 object-contain mb-2 rounded"}),(0,a.jsx)("div",{className:"font-semibold",children:t.title}),(0,a.jsx)("div",{className:"text-md ",children:(0,a.jsx)("p",{className:"font-light line-clamp-2",children:t.description})}),(0,a.jsxs)("div",{className:"text-lg font-bold text-black dark:text-gray-400",children:[t.price," $"]}),(0,a.jsx)(o,{product:t})]})}var d=r(8629),u=r(5534),h=r(9228);function p(){let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,[r,a]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let r=setTimeout(()=>{a(e)},t);return()=>clearTimeout(r)},[e,t]),r}(e.trim(),500),{data:o}=(0,d.I)({queryKey:["categories"],queryFn:u.jE}),{page:p,setPage:m,totalPages:g,skip:f,setTotal:x}=(0,h.A)(0,10),{products:v,total:j,isLoading:y,isError:b}=function(e){var t;let{searchQuery:r,category:a,limit:s,skip:i}=e,n=r.length>0,c=function(e){let{category:t,limit:r,skip:a,enabled:s=!0}=e;return(0,d.I)({queryKey:["products",t,r,a],queryFn:()=>t?(0,u.c0)(t,r,a):(0,u.j0)(r,a),enabled:s})}({category:a,limit:s,skip:i,enabled:!n}),o=function(e){let{query:t,limit:r,skip:a}=e,s=t.trim();return(0,d.I)({queryKey:["searchedProducts",s,r,a],queryFn:()=>(0,u.zh)(s,r,a),enabled:s.length>0})}({query:r,limit:s,skip:i}),l=n?o.data:c.data,h=n?o.isLoading:c.isLoading,p=n?o.error:c.error;return{products:null==l?void 0:l.products,total:null!==(t=null==l?void 0:l.total)&&void 0!==t?t:0,isLoading:h,isError:p,isSearching:n}}({searchQuery:n,category:r,limit:10,skip:f});return(0,s.useEffect)(()=>{j&&x(j)},[j,x]),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Produits"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[(0,a.jsx)("input",{className:"input",placeholder:"Recherche…",value:e,onChange:e=>{t(e.target.value)}}),(0,a.jsxs)("select",{className:"input max-w-xs",value:r,onChange:e=>{i(e.target.value),t(""),m(1)},children:[(0,a.jsx)("option",{value:"",children:"Toutes cat\xe9gories"}),null==o?void 0:o.map(e=>(0,a.jsx)("option",{value:e.slug,children:e.name},e.name))]})]}),y?(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Array.from({length:3}).map((e,t)=>(0,a.jsx)("div",{className:"skeleton h-40 w-full rounded-md"},t))}):b?(0,a.jsx)(c.A,{color:"red",message:"Une erreur est survenue. Veuillez r\xe9essayer."}):(null==v?void 0:v.length)?(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:v.map(e=>(0,a.jsx)(l,{product:e},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-6",children:" Aucun produit trouv\xe9"}),(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-4",children:[(0,a.jsx)("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:1===p,className:"px-3 py-1 rounded border hover:bg-gray-100 disabled:opacity-50",children:"Pr\xe9c\xe9dant"}),(0,a.jsxs)("span",{className:"px-4 py-2 font-medium",children:["Page ",p," sur ",g]}),(0,a.jsx)("button",{onClick:()=>m(e=>e+1),disabled:10*p>=(g||0),className:"px-3 py-1 rounded border hover:bg-gray-100 disabled:opacity-50",children:"Suivant"})]})]})}},507:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),s=r(2115);function i(e){let{color:t="green",message:r,duration:i=1e3}=e,[n,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=setTimeout(()=>c(!1),i);return()=>clearTimeout(e)},[i]),n)?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 z-50",children:(0,a.jsx)("div",{className:"border p-4 rounded-lg shadow-lg w-80 text-center ".concat({green:"bg-green-100 text-green-800 border-green-300",red:"bg-red-100 text-red-800 border-red-300"}[t]),children:(0,a.jsx)("p",{className:"font-medium",children:r})})}):null}},4915:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>c,_:()=>o});var a=r(5155),s=r(2115);let i="cart",n=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,s.useState)([]),[o,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{l(!0);try{let e=localStorage.getItem(i);c(e?JSON.parse(e):[])}catch(e){}},[]),(0,s.useEffect)(()=>{if(o)try{localStorage.setItem(i,JSON.stringify(r))}catch(e){console.log("error saving cart",e)}},[r,o]),(0,a.jsx)(n.Provider,{value:{cart:r,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c(r=>r.find(t=>t.productId===e.id)?r.map(r=>r.productId===e.id?{...r,quantity:r.quantity+t,total:r.price*(r.quantity+t)}:r):[...r,{productId:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail,quantity:t,total:e.price*t}])},clearCart:()=>c([])},children:t})},o=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useCart doit \xeatre utilis\xe9 au milieu de CartProvider");return e}},9228:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(2115);function s(e,t){let[r,s]=(0,a.useState)(1),[i,n]=(0,a.useState)(e),c=(0,a.useMemo)(()=>Math.ceil(i/t)||1,[i,t]),o=(0,a.useMemo)(()=>(r-1)*t,[r,t]);return{page:r,setPage:s,totalPages:c,skip:o,setTotal:n}}},5534:(e,t,r)=>{"use strict";r.d(t,{c0:()=>c,cU:()=>o,hU:()=>l,j0:()=>s,jE:()=>n,zh:()=>i});let a="https://dummyjson.com";async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(a,"/products?limit=").concat(e,"&skip=").concat(t));if(!r.ok)throw Error("Erreur de r\xe9cup\xe9ration de produits");return r.json()}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=await fetch("".concat(a,"/products/search?q=").concat(e,"&limit=").concat(t,"&skip=").concat(r));if(!s.ok)throw Error("Erreur hors de la recherche des produits");return s.json()}async function n(){let e=await fetch("".concat(a,"/products/categories"));if(!e.ok)throw Error("Erreur de r\xe9cup\xe9ration des categories");return e.json()}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=await fetch("".concat(a,"/products/category/").concat(e,"?limit=").concat(t,"&skip=").concat(r));if(!s.ok)throw Error("Erreur hors de la r\xe9cup\xe9ration des produits par cat\xe9gorie");return s.json()}async function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(a,"/carts?limit=").concat(e,"&skip=").concat(t));if(!r.ok)throw Error("Erreur de r\xe9cup\xe9ration des cartes");return r.json()}async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(a,"/users?limit=").concat(e,"&skip=").concat(t));if(!r.ok)throw Error("Erreur de r\xe9cup\xe9ration des utilisateurs");return r.json()}}},e=>{var t=t=>e(e.s=t);e.O(0,[527,629,441,517,358],()=>t(1559)),_N_E=e.O()}]);